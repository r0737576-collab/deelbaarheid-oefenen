<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Online Deelbaarheidsoefeningen</title>
<style>
  :root{
    --bg:#f7f8fb; --card:#ffffff; --ink:#111; --muted:#4b5563;
    --ok:#1ea97c; --bad:#d64545; --warn:#f59e0b; --line:#e5e7eb;
    --accent:#2563eb;
  }
  html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;}
  .wrap{max-width:980px;margin:0 auto;padding:24px;}
  h1{margin:0 0 8px 0;font-size:22px}
  p{margin:6px 0;color:var(--muted)}
  .card{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:16px;margin-top:12px;box-shadow:0 8px 30px rgba(0,0,0,.05)}
  .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
  button{
    border:none;border-radius:10px;padding:10px 14px;font-weight:600;cursor:pointer;
    color:#fff;background:var(--accent);box-shadow:0 6px 16px rgba(37,99,235,.25);
  }
  button.secondary{background:#374151}
  button.ghost{background:#0f172a}
  button:disabled{opacity:.6;cursor:not-allowed}
  table{width:100%;border-collapse:collapse;margin-top:8px}
  th,td{border:1px solid var(--line);padding:8px;text-align:center}
  th:first-child, td:first-child{ text-align:right; padding-right:12px; }
  .grid{display:grid;grid-template-columns: 1fr;gap:12px}
  .tips{font-size:13px;color:var(--muted)}
  .legend{display:flex;gap:12px;flex-wrap:wrap;margin-top:8px;font-size:13px}
  .pill{padding:4px 8px;border-radius:999px;border:1px solid var(--line);background:#f3f4f6}
  .ok{background:#e6f7f1;border-color:#c7ecde}
  .bad{background:#fde8e8;border-color:#f7caca}
  .miss{background:#fff7ed;border-color:#fed7aa}
  .score{margin-top:10px;font-weight:700}
  .mistakes{margin-top:6px;font-size:14px}
  .explain{margin-top:14px;border-top:1px dashed var(--line);padding-top:10px}
  .rule{background:#f8fafc;border:1px solid var(--line);border-radius:10px;padding:10px;margin-top:8px}
  .rule h3{margin:0 0 6px 0;font-size:16px}
  .hdr-btn{color:var(--accent);text-decoration:underline;cursor:pointer}
  .muted{color:var(--muted)}
  .cell{
    display:flex;align-items:center;justify-content:center;gap:6px;
  }
  .cell input[type="checkbox"]{transform:scale(1.2)}
  /* feedback kleuren */
  .correct{background:#e6f7f1}
  .wrong-checked{background:#fde8e8}
  .wrong-missed{outline:2px solid var(--warn)}
</style>
</head>
<body>
  <div class="wrap">
    <h1>Online deelbaarheidsoefeningen</h1>
    <p>Vink aan of elk getal deelbaar is door <b>/2 /3 /4 /5 /6 /8 /9 /10 /12</b>. Klik op een kolomtitel voor <b>uitleg</b>. Klik op <b>Nakijken</b> voor feedback en score.</p>

    <div class="card">
      <div class="btns">
        <button id="btn-new">Nieuwe oefening (5 getallen)</button>
        <button id="btn-check" class="secondary" disabled>Nakijken</button>
        <button id="btn-reset" class="ghost" disabled>Herbegin (leegmaken)</button>
      </div>

      <div id="exercise"></div>

      <div class="legend">
        <span class="pill ok">✓ correct</span>
        <span class="pill bad">✗ fout (aangevinkt maar niet deelbaar)</span>
        <span class="pill miss">◻ moest aangevinkt worden (gemist)</span>
      </div>

      <div id="result" class="score"></div>
      <div id="mistakes" class="mistakes"></div>

      <div class="explain">
        <span class="muted">Uitleg nodig? Klik op een kolomtitel, bv. <span class="hdr-btn" onclick="showRule(2)">/2</span>, <span class="hdr-btn" onclick="showRule(3)">/3</span>, …</span>
        <div id="rule-box"></div>
      </div>
    </div>

    <p class="tips">Tip: elke reeks bestaat uit 5 getallen die <b>minstens één</b> juiste deler hebben binnen {2,3,4,5,6,8,9,10,12}.</p>
  </div>

<script>
  // --- Config ---
  const DIVISORS = [2,3,4,5,6,8,9,10,12];
  const MIN = 1000;          // leesbare getallen
  const MAX = 999999;        // maar nog uitdagend

  const RULES = {
    2: {
      title: "Deelbaar door 2",
      text: "Als het laatste cijfer even is (0, 2, 4, 6, 8), dan is het getal deelbaar door 2.",
      example: "Voorbeeld: 98 is deelbaar door 2, want 8 is even (8 : 2 = 4)."
    },
    3: {
      title: "Deelbaar door 3",
      text: "Als de som van de cijfers deelbaar is door 3, dan is het getal deelbaar door 3.",
      example: "Voorbeeld: 483 → 4 + 8 + 3 = 15 en 15 is deelbaar door 3."
    },
    4: {
      title: "Deelbaar door 4",
      text: "Kijk naar de laatste twee cijfers. Als die deelbaar zijn door 4 (of 00), dan is het hele getal deelbaar door 4.",
      example: "Voorbeeld: 132 → 32 is deelbaar door 4."
    },
    5: {
      title: "Deelbaar door 5",
      text: "Als het laatste cijfer 0 of 5 is, dan is het getal deelbaar door 5.",
      example: "Voorbeelden: 78435 of 54720."
    },
    6: {
      title: "Deelbaar door 6",
      text: "Een getal is deelbaar door 6 als het deelbaar is door 2 én door 3.",
      example: "Voorbeeld: 684 is even en 6 + 8 + 4 = 18 (deelbaar door 3)."
    },
    8: {
      title: "Deelbaar door 8",
      text: "Kijk naar de laatste drie cijfers. Als die deelbaar zijn door 8 (of 000), dan is het hele getal deelbaar door 8.",
      example: "Voorbeeld: 7160 → 160 is deelbaar door 8."
    },
    9: {
      title: "Deelbaar door 9",
      text: "Als de som van de cijfers deelbaar is door 9, dan is het getal deelbaar door 9.",
      example: "Voorbeeld: 6588 → 6 + 5 + 8 + 8 = 27 (deelbaar door 9)."
    },
    10: {
      title: "Deelbaar door 10",
      text: "Als het laatste cijfer 0 is, dan is het getal deelbaar door 10.",
      example: ""
    },
    12: {
      title: "Deelbaar door 12",
      text: "Een getal is deelbaar door 12 als het deelbaar is door 3 én door 4.",
      example: ""
    }
  };

  // --- Helpers ---
  const $ = sel => document.querySelector(sel);

  function randInt(a, b){ return Math.floor(Math.random()*(b-a+1))+a; }
  function hasAnyDivisor(n){
    return DIVISORS.some(d => n % d === 0);
  }
  function divisorsOf(n){
    return DIVISORS.filter(d => n % d === 0);
  }

  // --- State ---
  let numbers = [];
  let checked = []; // per rij een map {d:true/false}
  let graded = false;

  // --- UI builders ---
  function buildTable(){
    const container = $("#exercise");
    const table = document.createElement("table");

    // header
    const thead = document.createElement("thead");
    const hr = document.createElement("tr");
    const th0 = document.createElement("th");
    th0.textContent = "Getal";
    hr.appendChild(th0);
    for(const d of DIVISORS){
      const th = document.createElement("th");
      const a = document.createElement("span");
      a.textContent = "/" + d;
      a.className = "hdr-btn";
      a.title = "Klik voor uitleg";
      a.onclick = () => showRule(d);
      th.appendChild(a);
      hr.appendChild(th);
    }
    thead.appendChild(hr);
    table.appendChild(thead);

    // body
    const tbody = document.createElement("tbody");
    for(let i=0;i<numbers.length;i++){
      const tr = document.createElement("tr");
      const tdN = document.createElement("td");
      tdN.textContent = numbers[i];
      tr.appendChild(tdN);
      for(const d of DIVISORS){
        const td = document.createElement("td");
        td.className = "cell";
        const cb = document.createElement("input");
        cb.type = "checkbox";
        cb.dataset.row = String(i);
        cb.dataset.div = String(d);
        cb.onchange = () => { checked[i][d] = cb.checked; if(graded){ clearFeedback(); } };
        td.appendChild(cb);
        tr.appendChild(td);
      }
      tbody.appendChild(tr);
    }
    table.appendChild(tbody);

    container.innerHTML = "";
    container.appendChild(table);
  }

  function showRule(d){
    const box = $("#rule-box");
    const r = RULES[d];
    if(!r){ box.innerHTML = ""; return; }
    box.innerHTML = `
      <div class="rule">
        <h3>/${d} — ${r.title}</h3>
        <div>${r.text}</div>
        ${r.example ? `<div class="muted" style="margin-top:6px">${r.example}</div>` : ""}
      </div>
    `;
  }

  function clearFeedback(){
    graded = false;
    $("#result").textContent = "";
    $("#mistakes").textContent = "";
    document.querySelectorAll("td.cell").forEach(td=>{
      td.classList.remove("correct","wrong-checked","wrong-missed");
    });
    $("#btn-check").disabled = numbers.length===0;
  }

  // --- Actions ---
  function newExercise(){
    // 5 getallen, elk met minstens één deler
    numbers = [];
    while(numbers.length < 5){
      const n = randInt(MIN, MAX);
      if(!hasAnyDivisor(n)) continue;
      numbers.push(n);
    }
    checked = numbers.map(()=> {
      const map = {};
      DIVISORS.forEach(d=>map[d]=false);
      return map;
    });
    graded = false;
    buildTable();
    clearFeedback();
    $("#btn-check").disabled = false;
    $("#btn-reset").disabled = false;
  }

  function resetChecks(){
    checked.forEach(map => DIVISORS.forEach(d => map[d] = false));
    // uncheck UI
    document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
    clearFeedback();
  }

  function grade(){
    if(numbers.length===0) return;
    let total = 0, correct = 0;
    const mistakes = []; // per rij: lijst foutieve delers

    for(let i=0;i<numbers.length;i++){
      const n = numbers[i];
      const real = new Set(divisorsOf(n));
      const rowMistakes = [];

      const tds = document.querySelectorAll(`tbody tr:nth-child(${i+1}) td.cell`);
      let k = 0;
      for(const d of DIVISORS){
        const td = tds[k++];
        const want = real.has(d);
        const got = !!checked[i][d];
        total += 1;

        if(want && got){
          // Correct aangevinkt
          td.classList.add("correct");
          correct += 1;
        }else if(!want && !got){
          // Correct leeggelaten
          td.classList.add("correct");
          correct += 1;
        }else if(!want && got){
          // Fout: aangevinkt terwijl niet deelbaar
          td.classList.add("wrong-checked");
          rowMistakes.push("/"+d);
        }else if(want && !got){
          // Fout: moest aangevinkt worden
          td.classList.add("wrong-missed");
          rowMistakes.push("/"+d);
        }
      }
      if(rowMistakes.length){
        mistakes.push(`Getal ${n}: fout bij ${rowMistakes.join(", ")}`);
      }
    }

    graded = true;
    $("#result").textContent = `Score: ${correct} / ${total}`;
    $("#mistakes").innerHTML = mistakes.length
      ? "<b>Overzicht fouten</b><br>" + mistakes.map(x=>`• ${x}`).join("<br>")
      : "Mooi! Alles correct.";
  }

  // --- Init bindings ---
  window.addEventListener("DOMContentLoaded", ()=>{
    $("#btn-new").addEventListener("click", newExercise);
    $("#btn-check").addEventListener("click", grade);
    $("#btn-reset").addEventListener("click", resetChecks);
    // Start meteen met een oefening:
    newExercise();
  });
</script>
</body>
</html>
