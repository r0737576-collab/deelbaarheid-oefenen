<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Online Deelbaarheidsoefeningen</title>

<style>
  :root{
    --bg:#f7f8fb; --card:#ffffff; --ink:#111; --muted:#4b5563;
    --ok:#1ea97c; --bad:#d64545; --warn:#f59e0b; --line:#e5e7eb;
    --accent:#2563eb;
  }

  body{
    margin:0; padding:0; background:var(--bg);
    color:var(--ink); font-family:Arial, sans-serif;
  }

  .wrap{
    max-width:900px; margin:0 auto; padding:20px;
  }

  h1{ margin:0 0 8px; font-size:24px; }
  p{ margin:6px 0; color:var(--muted); }

  .card{
    background:var(--card); border:1px solid var(--line);
    border-radius:12px; padding:16px; margin-top:12px;
    box-shadow:0 8px 20px rgba(0,0,0,.05);
  }

  button{
    padding:10px 14px; margin:6px 8px 6px 0;
    font-size:15px; font-weight:600;
    border:none; border-radius:8px;
    cursor:pointer; color:#fff;
  }
  #btn-new{ background:var(--accent); }
  #btn-check{ background:#374151; }
  #btn-pdf{ background:#0f172a; }

  button:disabled{ opacity:.6; cursor:not-allowed; }

  table{
    width:100%; border-collapse:collapse; margin-top:12px;
  }
  th,td{
    padding:8px; border:1px solid var(--line); text-align:center;
  }
  th:first-child, td:first-child{
    text-align:right; padding-right:12px;
  }

  .legend{
    display:flex; gap:10px; flex-wrap:wrap; margin-top:8px;
    font-size:13px;
  }
  .pill{
    padding:4px 8px; border-radius:999px;
    border:1px solid var(--line); background:#f3f4f6;
  }
  .ok{ background:#e6f7f1; border-color:#c7ecde; }
  .bad{ background:#fde8e8; border-color:#f7caca; }
  .miss{ background:#fff7ed; border-color:#fed7aa; }

  .score{
    margin-top:12px; font-size:17px; font-weight:700;
  }
  .mistakes{
    margin-top:8px; font-size:14px;
  }

  /* feedback */
  .correct{ background:#e6f7f1; }
  .wrong-checked{ background:#fde8e8; }
  .wrong-missed{ outline:2px solid var(--warn); }

  /* PRINT MODE */
@media print {
  body *{
    visibility:hidden !important;
  }
  #print-area, #print-area *{
    visibility:visible !important;
  }
  #print-area{
    position:absolute; top:0; left:0; width:100%;
  }
  button, .legend{
    display:none !important;
  }
  /* Verberg uitleg in PDF */
  #rule-box{
    display:none !important;
  }
}
</style>
    }
  }
</style>

</head>
<body>

<div class="wrap">
<h1>Online deelbaarheidsoefeningen</h1>
<p>Vink aan welke delers passen. Klik op “Nakijken” voor feedback.</p>

<div class="card">
  <button id="btn-new">Nieuwe oefening (5 getallen)</button>
  <button id="btn-check" disabled>Nakijken</button>
  <button id="btn-pdf" disabled>Print PDF</button>

  <div id="print-area">
    <div id="exercise"></div>
    <div id="result" class="score"></div>
    <div id="mistakes" class="mistakes"></div>
  </div>
<div id="rule-box"></div>
  
  <div class="legend">
    <span class="pill ok">✓ correct</span>
    <span class="pill bad">✗ fout</span>
    <span class="pill miss">◻ vergeten aan te vinken</span>
  </div>
</div>
</div>

<script>
const DIVS=[2,3,4,5,6,8,9,10,12];

let numbers=[];
let checked=[];
let graded=false;

function rand(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }
function hasDiv(n){ return DIVS.some(d=>n%d===0); }
function divsOf(n){ return DIVS.filter(d=>n%d===0); }

function newExercise(){
  numbers=[];
  while(numbers.length<5){
    let x=rand(1000,999999);
    if(hasDiv(x)) numbers.push(x);
  }

  checked=numbers.map(()=> {
    let o={}; DIVS.forEach(d=>o[d]=false);
    return o;
  });

  graded=false;
  buildTable();
  clearFeedback();

  document.querySelector("#btn-check").disabled=false;
  document.querySelector("#btn-pdf").disabled=true;
}

function buildTable(){
  let html="<table><thead><tr><th>Getal</th>";
  DIVS.forEach(d=>{
    html+=`<th>/${d}</th>`;
  });
  html+="</tr></thead><tbody>";

  numbers.forEach((n,i)=>{
    html+=`<tr><td>${n}</td>`;
    DIVS.forEach(d=>{
      html+=`<td class="cell"><input type="checkbox" data-r="${i}" data-d="${d}"></td>`;
    });
    html+="</tr>";
  });

  html+="</tbody></table>";
  document.querySelector("#exercise").innerHTML=html;

  document.querySelectorAll("input[type=checkbox]").forEach(cb=>{
    cb.onchange=()=>{
      let r=cb.dataset.r, d=cb.dataset.d;
      checked[r][d]=cb.checked;
      if(graded) clearFeedback();
    };
  });
}

function clearFeedback(){
  graded=false;
  document.querySelector("#result").innerHTML="";
  document.querySelector("#mistakes").innerHTML="";
  document.querySelectorAll(".cell").forEach(td=>{
    td.classList.remove("correct","wrong-checked","wrong-missed");
  });
}

function grade(){
  graded=true;
  let total=0, correct=0;
  let mistakes=[];

  numbers.forEach((n,i)=>{
    let real=new Set(divsOf(n));
    let rowErrors=[];

    let tds=document.querySelectorAll(`tbody tr:nth-child(${i+1}) td.cell`);
    let idx=0;

    DIVS.forEach(d=>{
      let td=tds[idx++];
      let want=real.has(d);
      let got=checked[i][d];
      total++;

      if(want && got){
        td.classList.add("correct");
        correct++;
      }else if(!want && !got){
        td.classList.add("correct");
        correct++;
      }else if(!want && got){
        td.classList.add("wrong-checked");
        rowErrors.push("/"+d);
      }else if(want && !got){
        td.classList.add("wrong-missed");
        rowErrors.push("/"+d);
      }
    });

    if(rowErrors.length>0){
      mistakes.push(`Getal ${n}: fout bij ${rowErrors.join(", ")}`);
    }
  });

  document.querySelector("#result").innerHTML=`Score: ${correct} / ${total}`;
  document.querySelector("#btn-pdf").disabled=false;

  if(mistakes.length){
    document.querySelector("#mistakes").innerHTML=
      `<b>Overzicht fouten:</b><br>${mistakes.join("<br>")}`;
  } else {
    document.querySelector("#mistakes").innerHTML="Perfect! Alles juist.";
  }
}

function printPDF(){
  window.print();
}

// EVENT LISTENERS
window.addEventListener("DOMContentLoaded", () => {
  document.querySelector("#btn-new").addEventListener("click", newExercise);
  document.querySelector("#btn-check").addEventListener("click", grade);
  document.querySelector("#btn-pdf").addEventListener("click", printPDF);

  newExercise();
});
</script>

</body>
</html>
